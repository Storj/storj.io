<script src="/js/jquery-2.1.1.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
    window.onload = function() {
        checkConsent();
    };

    function hasConsented() {
        var name = "storj_cookie_consent=";
        var decodedCookie = decodeURIComponent(document.cookie);
        var ca = decodedCookie.split(';') || [];

        return ca.some(cookie => {
            return cookie.trim().indexOf(name) === 0;
        });
    }

    function checkConsent(){
        if (hasConsented()) {
            document.cookie = "storj_cookie_consent=true;";
            var consentBanner = document.getElementById("consent-banner");

            if (consentBanner) {
                consentBanner.style.display = "none";
            }
        }
    }
</script>
<script type="text/javascript">
	window.onload = function() {
		var button = document.getElementById("mc-embedded-subscribe-footer");

		if (!button) {
			return;
		}

		button.onclick = function (event) {
			event.preventDefault();

			var inputValue = document.getElementById("mce-EMAIL-newsletter").value;
			var errElm = document.getElementById("mce-error-response-newsletter");
			var succElm = document.getElementById("mce-success-response-newsletter");

			if (!inputValue || !inputValue.includes("@")) {
                setAttributes();

				return;
			}

			analytics.identify(
			    inputValue,
				{ email: inputValue, storj_newsletter: true },
				{},
				function() {
					analytics.track("storj_newsletter", {});
	                setAttributes();
				},
			);

			function setAttributes() {
                if(succElm) {
                    succElm.setAttribute("style", "display:none;");
                }
                if(errElm) {
                    errElm.setAttribute("style", "display:flex;");
                }
            }
		}
	}
</script>
